{"version":3,"file":"analytics.js","sources":["../node_modules/web-vitals/dist/web-vitals.js","../tag/analytics.ts"],"sourcesContent":["var t,e,n,i,a=function(t,e){return{name:t,value:void 0===e?-1:0,delta:0,entries:[],id:\"v1-\".concat(Date.now(),\"-\").concat(Math.floor(8999999999999*Math.random())+1e12)}},r=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var n=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}},o=!1,u=function(t,e){o||\"undefined\"!=typeof InstallTrigger||(addEventListener(\"beforeunload\",(function(){})),o=!0);addEventListener(\"visibilitychange\",(function n(i){\"hidden\"===document.visibilityState&&(t(i),e&&removeEventListener(\"visibilitychange\",n,!0))}),!0)},c=function(t){addEventListener(\"pageshow\",(function(e){e.persisted&&t(e)}),!0)},s=new WeakSet,f=function(t,e,n){var i;return function(){e.value>=0&&(n||s.has(e)||\"hidden\"===document.visibilityState)&&(e.delta=e.value-(i||0),(e.delta||void 0===i)&&(i=e.value,t(e)))}},m=function(t,e){var n,i=a(\"CLS\",0),o=function(t){t.hadRecentInput||(i.value+=t.value,i.entries.push(t),n())},s=r(\"layout-shift\",o);s&&(n=f(t,i,e),u((function(){s.takeRecords().map(o),n()})),c((function(){i=a(\"CLS\",0),n=f(t,i,e)})))},d=-1,p=function(){return\"hidden\"===document.visibilityState?0:1/0},v=function(){u((function(t){var e=t.timeStamp;d=e}),!0)},l=function(){return d<0&&(d=p(),v(),c((function(){setTimeout((function(){d=p(),v()}),0)}))),{get timeStamp(){return d}}},S=function(t,e){var n,i=l(),o=a(\"FCP\"),u=r(\"paint\",(function(t){\"first-contentful-paint\"===t.name&&(u&&u.disconnect(),t.startTime<i.timeStamp&&(o.value=t.startTime,o.entries.push(t),s.add(o),n()))}));u&&(n=f(t,o,e),c((function(i){o=a(\"FCP\"),n=f(t,o,e),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-i.timeStamp,s.add(o),n()}))}))})))},y={passive:!0,capture:!0},h=new Date,g=function(i,a){t||(t=a,e=i,n=new Date,T(removeEventListener),w())},w=function(){if(e>=0&&e<n-h){var a={entryType:\"first-input\",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+e};i.map((function(t){t(a)})),i=[]}},L=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;\"pointerdown\"==t.type?function(t,e){var n=function(){g(t,e),a()},i=function(){a()},a=function(){removeEventListener(\"pointerup\",n,y),removeEventListener(\"pointercancel\",i,y)};addEventListener(\"pointerup\",n,y),addEventListener(\"pointercancel\",i,y)}(e,t):g(e,t)}},T=function(t){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].map((function(e){return t(e,L,y)}))},E=function(n,o){var m,d=l(),p=a(\"FID\"),v=function(t){t.startTime<d.timeStamp&&(p.value=t.processingStart-t.startTime,p.entries.push(t),s.add(p),m())},S=r(\"first-input\",v);m=f(n,p,o),S&&u((function(){S.takeRecords().map(v),S.disconnect()}),!0),S&&c((function(){var r;p=a(\"FID\"),m=f(n,p,o),i=[],e=-1,t=null,T(addEventListener),r=v,i.push(r),w()}))},b=function(t,e){var n,i=l(),o=a(\"LCP\"),m=function(t){var e=t.startTime;e<i.timeStamp&&(o.value=e,o.entries.push(t)),n()},d=r(\"largest-contentful-paint\",m);if(d){n=f(t,o,e);var p=function(){s.has(o)||(d.takeRecords().map(m),d.disconnect(),s.add(o),n())};[\"keydown\",\"click\"].map((function(t){addEventListener(t,p,{once:!0,capture:!0})})),u(p,!0),c((function(i){o=a(\"LCP\"),n=f(t,o,e),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-i.timeStamp,s.add(o),n()}))}))}))}},F=function(t){var e,n=a(\"TTFB\");e=function(){try{var e=performance.getEntriesByType(\"navigation\")[0]||function(){var t=performance.timing,e={entryType:\"navigation\",startTime:0};for(var n in t)\"navigationStart\"!==n&&\"toJSON\"!==n&&(e[n]=Math.max(t[n]-t.navigationStart,0));return e}();n.value=n.delta=e.responseStart,n.entries=[e],t(n)}catch(t){}},\"complete\"===document.readyState?setTimeout(e,0):addEventListener(\"pageshow\",e)};export{m as getCLS,S as getFCP,E as getFID,b as getLCP,F as getTTFB};\n","import * as webVitals from 'web-vitals';\nconst origin = process.env.SCRIPT_ORIGIN;\nconst script = window.document.querySelector(\n  `script[src=\"${origin}/analytics.js\"]`\n);\nconst property = script!.getAttribute('data-property')!;\n\ninterface Metric {\n  /** property */\n  p: string;\n  /** type */\n  t: 'CLS' | 'FCP' | 'FID' | 'LCP' | 'TTFB';\n  /** url */\n  u: string;\n  /** value */\n  v: number;\n  /** metric id */\n  i: string;\n}\n\ninterface PageView {\n  /** property */\n  p: string;\n  /** type */\n  t: 'pageview';\n  /** referrer */\n  r: string;\n  /** url */\n  u: string;\n}\n\nfunction sendBeacon(event: Metric | PageView) {\n  const url = `${origin}/api/collect`;\n  const data = JSON.stringify(event);\n  if (navigator.sendBeacon) {\n    return navigator.sendBeacon(url, data);\n  } else {\n    var xhr = new XMLHttpRequest();\n    xhr.open('POST', url);\n    xhr.send(data);\n  }\n}\n\nfunction reportMetric(metric: webVitals.Metric) {\n  sendBeacon({\n    p: property,\n    t: metric.name,\n    u: window.location.href,\n    i: metric.id,\n    v: metric.value,\n  });\n}\n\nwebVitals.getCLS(reportMetric);\nwebVitals.getFCP(reportMetric);\nwebVitals.getFID(reportMetric);\nwebVitals.getLCP(reportMetric);\nwebVitals.getTTFB(reportMetric);\n\nfunction pageView() {\n  sendBeacon({\n    p: property,\n    t: 'pageview',\n    r: window.document.referrer,\n    u: window.location.href,\n  });\n}\n\npageView();\n\nif (window.history) {\n  const originalPushState = window.history.pushState;\n  window.history.pushState = function () {\n    originalPushState.apply(\n      this,\n      (arguments as unknown) as Parameters<typeof window.history.pushState>\n    );\n    pageView();\n  };\n}\n"],"names":["t","e","n","i","a","name","value","delta","entries","id","concat","Date","now","Math","floor","random","r","PerformanceObserver","supportedEntryTypes","includes","getEntries","map","observe","type","buffered","o","u","InstallTrigger","addEventListener","document","visibilityState","removeEventListener","c","persisted","s","WeakSet","f","has","d","p","v","timeStamp","l","setTimeout","y","passive","capture","h","g","T","w","entryType","target","cancelable","startTime","processingStart","L","performance","origin","process","property","window","querySelector","getAttribute","sendBeacon","event","url","data","JSON","stringify","navigator","xhr","XMLHttpRequest","open","send","reportMetric","metric","location","href","pageView","referrer","hadRecentInput","push","takeRecords","disconnect","add","requestAnimationFrame","m","S","once","getEntriesByType","timing","max","navigationStart","responseStart","readyState","history","originalPushState","pushState","apply","this","arguments"],"mappings":"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"}